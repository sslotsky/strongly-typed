// Generated by BUCKLESCRIPT VERSION 4.0.3, PLEASE EDIT WITH CARE
'use strict';

var $$String = require("bs-platform/lib/js/string.js");
var Js_primitive = require("bs-platform/lib/js/js_primitive.js");

var match = module.hot;

if (match !== undefined) {
  Js_primitive.valFromOption(match).accept();
} else {
  console.log("We are not hot");
}

function nextState(state) {
  var n = state[/* word */0][/* y */2];
  state[/* word */0][/* y */2] = n > 300.0 ? 0.0 : state[/* word */0][/* y */2] + 1.0;
  return state;
}

var canvas = document.getElementById("canvas");

var context = canvas.getContext("2d");

function paint(state) {
  context.clearRect(0, 0, 300, 300);
  context.font = "30px Arial";
  var newState = nextState(state);
  var input = newState[/* input */1];
  var word = newState[/* word */0];
  var s = $$String.sub(word[/* text */0], 0, input.length);
  var match = s === input ? /* tuple */[
      s,
      $$String.sub(word[/* text */0], input.length, word[/* text */0].length - input.length | 0)
    ] : /* tuple */[
      "",
      word[/* text */0]
    ];
  var matching = match[0];
  var $$continue = word[/* x */1] + context.measureText(matching).width;
  context.fillStyle = "red";
  context.fillText(matching, word[/* x */1], word[/* y */2]);
  context.fillStyle = "blue";
  context.fillText(match[1], $$continue, word[/* y */2]);
  window.requestAnimationFrame((function () {
          return paint(state);
        }));
  return /* () */0;
}

var initialState_000 = /* word : record */[
  /* text */"Algolia",
  /* x */10.0,
  /* y */30.0
];

var initialState = /* record */[
  initialState_000,
  /* input */"Al"
];

paint(initialState);

exports.nextState = nextState;
exports.canvas = canvas;
exports.context = context;
exports.paint = paint;
exports.initialState = initialState;
/* match Not a pure module */
